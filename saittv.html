<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TV YouTube Player</title>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            background: #000;
            overflow: hidden;
            width: 100%;
            height: 100%;
            font-family: Arial, sans-serif;
        }
        #player {
            width: 100%;
            height: 100%;
            border: none;
        }
        #controls {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.8);
            z-index: 10000;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            opacity: 0;
            transition: opacity 0.3s ease;
            pointer-events: none;
        }
        #controls.visible {
            opacity: 1;
            pointer-events: all;
        }
        .control-btn {
            background: rgba(255,255,255,0.2);
            color: white;
            border: 2px solid white;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            margin: 10px;
            font-size: 24px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
        }
        .control-btn:focus {
            background: rgba(255,255,255,0.4);
            transform: scale(1.1);
            outline: none;
        }
        .control-row {
            display: flex;
            justify-content: center;
            align-items: center;
        }
        #closeBtn {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255,0,0,0.8);
            color: white;
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            font-size: 20px;
            cursor: pointer;
            z-index: 10001;
        }
        #infoPanel {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(0,0,0,0.7);
            color: white;
            padding: 10px 15px;
            border-radius: 5px;
            font-size: 14px;
            z-index: 10001;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
    </style>
</head>
<body>
    <div id="player"></div>
    
    <div id="controls">
        <div class="control-row">
            <button class="control-btn" onclick="seek(-30)">‚è™</button>
            <button class="control-btn" onclick="seek(-10)">‚óÄ‚óÄ</button>
            <button class="control-btn" id="playPauseBtn" onclick="togglePlayPause()">‚è∏Ô∏è</button>
            <button class="control-btn" onclick="seek(10)">‚ñ∂‚ñ∂</button>
            <button class="control-btn" onclick="seek(30)">‚è©</button>
        </div>
        <div class="control-row">
            <button class="control-btn" onclick="changeVolume(-10)">üîâ</button>
            <button class="control-btn" onclick="changeVolume(10)">üîä</button>
        </div>
    </div>
    
    <button id="closeBtn" onclick="closePlayer()">‚úï</button>
    <div id="infoPanel"></div>

    <script src="https://www.youtube.com/iframe_api"></script>
    <script>
        let player;
        let hideTimeout;
        let isPlaying = false;
        
        function onYouTubeIframeAPIReady() {
            const urlParams = new URLSearchParams(window.location.search);
            const videoId = urlParams.get('videoId');
            
            player = new YT.Player('player', {
                height: '100%',
                width: '100%',
                videoId: videoId,
                playerVars: {
                    'autoplay': 1,
                    'rel': 0,
                    'modestbranding': 1,
                    'controls': 0, // Sakrij YouTube kontrole
                    'showinfo': 0,
                    'fs': 1,
                    'iv_load_policy': 3,
                    'disablekb': 1, // Onemoguƒái YouTube tastaturu
                    'playsinline': 1
                },
                events: {
                    'onReady': onPlayerReady,
                    'onStateChange': onPlayerStateChange
                }
            });
        }

        function onPlayerReady(event) {
            event.target.playVideo();
            isPlaying = true;
            updatePlayPauseButton();
            hideControls();
            
            // Po≈°alji informacije Androidu
            if (window.AndroidInterface) {
                AndroidInterface.playerReady();
            }
        }

        function onPlayerStateChange(event) {
            if (event.data === YT.PlayerState.PLAYING) {
                isPlaying = true;
            } else if (event.data === YT.PlayerState.PAUSED) {
                isPlaying = false;
            }
            updatePlayPauseButton();
            resetHideTimer();
        }

        function togglePlayPause() {
            if (isPlaying) {
                player.pauseVideo();
            } else {
                player.playVideo();
            }
            showControlsTemporary();
        }

        function seek(seconds) {
            const currentTime = player.getCurrentTime();
            player.seekTo(currentTime + seconds, true);
            showControlsTemporary();
            showInfo(`Preskakanje ${seconds > 0 ? 'napred' : 'nazad'} ${Math.abs(seconds)}s`);
        }

        function changeVolume(change) {
            const currentVolume = player.getVolume();
            const newVolume = Math.max(0, Math.min(100, currentVolume + change));
            player.setVolume(newVolume);
            showControlsTemporary();
            showInfo(`Zvuk: ${newVolume}%`);
        }

        function updatePlayPauseButton() {
            const btn = document.getElementById('playPauseBtn');
            if (btn) {
                btn.textContent = isPlaying ? '‚è∏Ô∏è' : '‚ñ∂Ô∏è';
            }
        }

        function showControls() {
            const controls = document.getElementById('controls');
            controls.classList.add('visible');
            resetHideTimer();
        }

        function hideControls() {
            const controls = document.getElementById('controls');
            controls.classList.remove('visible');
            clearTimeout(hideTimeout);
        }

        function showControlsTemporary() {
            showControls();
            resetHideTimer();
        }

        function resetHideTimer() {
            clearTimeout(hideTimeout);
            hideTimeout = setTimeout(hideControls, 5000);
        }

        function closePlayer() {
            if (window.AndroidInterface) {
                AndroidInterface.closePlayer();
            } else {
                window.history.back();
            }
        }

        function showInfo(message) {
            const infoPanel = document.getElementById('infoPanel');
            infoPanel.textContent = message;
            infoPanel.style.opacity = '1';
            setTimeout(() => {
                infoPanel.style.opacity = '0';
            }, 2000);
        }

        // Keyboard events za TV daljinski
        document.addEventListener('keydown', function(event) {
            showControlsTemporary();
            
            switch(event.key) {
                case 'Enter':
                case ' ':
                    togglePlayPause();
                    break;
                case 'ArrowLeft':
                    seek(-10);
                    break;
                case 'ArrowRight':
                    seek(10);
                    break;
                case 'ArrowUp':
                    changeVolume(10);
                    break;
                case 'ArrowDown':
                    changeVolume(-10);
                    break;
                case 'Escape':
                    closePlayer();
                    break;
            }
        });

        // Auto-hide kontrole
        document.addEventListener('mousemove', showControlsTemporary);
        document.addEventListener('click', showControlsTemporary);

        // Inicijalno sakrij kontrole
        window.addEventListener('load', function() {
            setTimeout(hideControls, 3000);
        });
    </script>
</body>
</html>